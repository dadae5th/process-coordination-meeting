# Gmail 앱 비밀번호 설정 가이드

Gmail을 사용하여 이메일을 발송하려면 **앱 비밀번호**가 필요합니다.

## 🔐 앱 비밀번호란?

- 일반 Gmail 비밀번호와 다른 **16자리 특수 비밀번호**
- 애플리케이션이 Gmail 계정에 안전하게 접근할 수 있게 해주는 인증 방법
- 2단계 인증이 활성화된 계정에서만 생성 가능
- 일반 비밀번호보다 **더 안전**

## ✅ 사전 요구사항

Gmail 앱 비밀번호를 생성하려면 **2단계 인증이 반드시 활성화**되어 있어야 합니다.

---

## 📝 단계별 설정 방법

### 1단계: 2단계 인증 활성화

1. **Google 계정 보안 페이지** 접속:
   - https://myaccount.google.com/security

2. **"Google에 로그인하는 방법"** 섹션 찾기

3. **"2단계 인증"** 클릭

4. **"시작하기"** 버튼 클릭

5. 화면 안내에 따라 진행:
   - 비밀번호 재입력
   - 전화번호 입력 (SMS 인증용)
   - 인증 코드 입력
   - "사용 설정" 클릭

6. ✅ 2단계 인증 활성화 완료!

---

### 2단계: 앱 비밀번호 생성

1. **앱 비밀번호 페이지** 직접 접속:
   - https://myaccount.google.com/apppasswords
   - 또는 Google 계정 > 보안 > 2단계 인증 > 앱 비밀번호

2. **앱 선택** 드롭다운 클릭:
   - "기타(맞춤 이름)" 선택

3. **앱 이름 입력**:
   ```
   공정협의체 안건 관리
   ```
   또는 원하는 이름 입력

4. **"생성"** 버튼 클릭

5. **16자리 앱 비밀번호 표시**:
   ```
   abcd efgh ijkl mnop
   ```
   이렇게 공백이 포함된 형태로 표시됩니다.

6. **중요**: 이 비밀번호를 **안전한 곳에 복사**:
   - 이 화면을 닫으면 다시 볼 수 없습니다!
   - 메모장이나 비밀번호 관리자에 저장하세요.

7. **"완료"** 클릭

---

## 🔧 환경변수 설정

### 공백 제거 중요!

생성된 앱 비밀번호에서 **공백을 제거**하고 사용해야 합니다:

```
생성된 비밀번호:    abcd efgh ijkl mnop
사용할 비밀번호:    abcdefghijklmnop  ← 공백 없음!
```

### .env.local 파일 설정

```env
GMAIL_USER=your_email@gmail.com
GMAIL_APP_PASSWORD=abcdefghijklmnop
```

**예시**:
```env
GMAIL_USER=hong.gildong@gmail.com
GMAIL_APP_PASSWORD=xyzw1234abcd5678
```

---

## ✅ 확인 사항

설정이 완료되면 다음을 확인하세요:

- [ ] 2단계 인증이 활성화되어 있습니다
- [ ] 앱 비밀번호가 생성되었습니다
- [ ] 앱 비밀번호에서 공백이 제거되었습니다
- [ ] `.env.local` 파일에 올바르게 입력되었습니다
- [ ] `GMAIL_USER`에 실제 Gmail 주소가 입력되었습니다

---

## 🧪 테스트

개발 서버를 실행하고 이메일 발송을 테스트하세요:

```powershell
npm run dev
```

1. 회원가입/로그인
2. 엑셀 파일 업로드
3. "이메일 발송" 버튼 클릭
4. 이메일 수신 확인 (스팸 폴더도 확인)

---

## ❓ 문제 해결

### "앱 비밀번호" 메뉴가 보이지 않음

**원인**: 2단계 인증이 활성화되지 않았습니다.

**해결**:
1. https://myaccount.google.com/security 접속
2. "2단계 인증" 활성화
3. 다시 앱 비밀번호 페이지 접속

---

### "보안 수준이 낮은 앱의 액세스" 메시지

**원인**: 이 설정은 더 이상 사용되지 않습니다.

**해결**:
- 대신 **앱 비밀번호**를 사용하세요 (더 안전함)
- 일반 Gmail 비밀번호로는 작동하지 않습니다

---

### 이메일이 발송되지 않음

**확인 사항**:

1. **환경변수 확인**:
   ```powershell
   # PowerShell에서 환경변수 확인
   Get-Content .env.local
   ```

2. **앱 비밀번호 공백 확인**:
   - ❌ `abcd efgh ijkl mnop` (공백 있음)
   - ✅ `abcdefghijklmnop` (공백 없음)

3. **Gmail 주소 확인**:
   - 올바른 Gmail 주소인지 확인
   - 오타가 없는지 확인

4. **개발 서버 재시작**:
   ```powershell
   # Ctrl+C로 서버 종료 후
   npm run dev
   ```

5. **터미널 로그 확인**:
   - 오류 메시지가 있는지 확인
   - "이메일 발송 성공" 메시지 확인

---

### 앱 비밀번호를 잃어버렸음

**해결**:

앱 비밀번호는 다시 확인할 수 없습니다. 새로 생성하세요:

1. https://myaccount.google.com/apppasswords 접속
2. 기존 "공정협의체 안건 관리" 항목 찾기
3. 휴지통 아이콘 클릭하여 삭제
4. 새 앱 비밀번호 생성

---

## 🔒 보안 팁

1. **앱 비밀번호 관리**:
   - 절대 공개 저장소에 커밋하지 마세요
   - `.gitignore`에 `.env.local` 포함 확인
   - 팀원과 공유 시 안전한 방법 사용 (예: 1Password, LastPass)

2. **정기적인 갱신**:
   - 6개월마다 앱 비밀번호 재생성 권장
   - 사용하지 않는 앱 비밀번호는 삭제

3. **접근 권한 확인**:
   - https://myaccount.google.com/permissions 에서 주기적으로 확인

---

## 📊 Gmail 전송 한도

### 무료 Gmail 계정
- **하루 최대**: 2,000통
- **분당 최대**: 약 60통
- **충분함**: 일반적인 안건 관리 용도로 충분

### Google Workspace (유료)
- **하루 최대**: 10,000통
- **대량 발송 필요 시** 고려

---

## 🎓 추가 리소스

- **Google 공식 가이드**: https://support.google.com/accounts/answer/185833
- **Nodemailer 문서**: https://nodemailer.com/about/
- **Gmail SMTP 설정**: https://support.google.com/mail/answer/7126229

---

## ✨ 완료!

이제 Gmail을 사용하여 무료로 이메일을 발송할 수 있습니다! 🎉

**다음 단계**: `QUICKSTART.md`를 따라 애플리케이션을 실행하세요.
